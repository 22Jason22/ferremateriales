<!-- Información de la orden -->
<div class="row">
    <div class="col-md-6">
        <p><strong>Número de Orden:</strong> {{ purchase.order_number }}</p>
        <p><strong>Fecha:</strong> {{ purchase.date|date:"d/m/Y" }}</p>
        <p><strong>Proveedor:</strong> {{ purchase.supplier.name }}</p>
    </div>
    <div class="col-md-6">
        <p><strong>Total:</strong> ${{ purchase.total_amount|floatformat:2 }}</p>
        <p><strong>Estado:</strong>
            {% if purchase.status == 'draft' %}
            <span class="badge bg-secondary">Borrador</span>
            {% elif purchase.status == 'sent' %}
            <span class="badge bg-info">Enviada</span>
            {% elif purchase.status == 'confirmed' %}
            <span class="badge bg-warning">Confirmada</span>
            {% elif purchase.status == 'received' %}
            <span class="badge bg-success">Recibida</span>
            {% elif purchase.status == 'cancelled' %}
            <span class="badge bg-danger">Cancelada</span>
            {% endif %}
        </p>
    </div>
</div>

<hr>

<!-- Items de la orden -->
<h6>Items de la Orden</h6>
<div class="table-responsive">
    <table class="table table-sm table-hover">
        <thead class="table-light">
            <tr>
                <th>Producto</th>
                <th>Cantidad</th>
                <th>Precio</th>
                <th>Total</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items %}
            <tr>
                <td>{{ item.product.name }}</td>
                <td>{{ item.quantity }}</td>
                <td>${{ item.price|floatformat:2 }}</td>
                <td>${{ item.total|floatformat:2 }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" class="text-center">No hay items en esta orden.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<hr>

<!-- Recepciones de mercancía -->
<h6>Recepciones de Mercancía</h6>
<div class="table-responsive">
    <table class="table table-sm table-hover">
        <thead class="table-light">
            <tr>
                <th>N° Recepción</th>
                <th>Fecha</th>
                <th>Recibido por</th>
            </tr>
        </thead>
        <tbody>
            {% for receipt in receipts %}
            <tr>
                <td>{{ receipt.receipt_number }}</td>
                <td>{{ receipt.date|date:"d/m/Y" }}</td>
                <td>{{ receipt.received_by.get_full_name|default:"N/A" }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" class="text-center">No hay recepciones registradas.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
